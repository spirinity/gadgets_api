### ===========================================
### GADGETS API - AUTH ENDPOINTS
### ===========================================

### 1. Test Root Endpoint
GET http://localhost:3000/

### ===========================================
### LOGIN
### ===========================================

### 2. Login sebagai Admin
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "admin@gadget.com",
  "password": "admin123"
}

### 3. Login sebagai Kasir
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "kasir@gadget.com",
  "password": "kasir123"
}

### 4. Login sebagai Teknisi
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "teknisi@gadget.com",
  "password": "teknisi123"
}

### 5. Login dengan kredensial salah (harus error)
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "wrong@email.com",
  "password": "wrongpass"
}

### 6. Login tanpa email (harus error)
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "password": "admin123"
}

### 7. Login tanpa password (harus error)
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "admin@gadget.com"
}

### ===========================================
### STAF MANAGEMENT (ADMIN)
### ===========================================

### 8. Get All Staf
GET http://localhost:3000/api/staf

### 9. Tambah Staf Baru
POST http://localhost:3000/api/staf
Content-Type: application/json

{
  "nama": "Budi Santoso",
  "email": "budi@gadget.com",
  "password": "budi123",
  "role": "kasir"
}

### 10. Edit Staf (update nama dan role)
PUT http://localhost:3000/api/staf/4
Content-Type: application/json

{
  "nama": "Budi Santoso Updated",
  "role": "teknisi"
}

### 11. Hapus Staf (butuh admin_id)
DELETE http://localhost:3000/api/staf/4
Content-Type: application/json

{
  "admin_id": 1
}

### ===========================================
### SPAREPART MANAGEMENT (ADMIN)
### ===========================================

### 12. Get All Sparepart
GET http://localhost:3000/api/sparepart

### 13. Tambah Sparepart Baru (Upsert)
POST http://localhost:3000/api/sparepart/upsert
Content-Type: application/json

{
  "kode_sku": "SKU004",
  "nama": "LCD iPhone 13",
  "harga_satuan": 450000,
  "tambah_qty": 5
}

### 14. Update Stok Sparepart (Upsert dengan SKU yang sudah ada)
POST http://localhost:3000/api/sparepart/upsert
Content-Type: application/json

{
  "kode_sku": "SKU001",
  "tambah_qty": 3
}

### 15. Edit Data Sparepart
PUT http://localhost:3000/api/sparepart/1
Content-Type: application/json

{
  "nama": "LCD Oppo A57 Updated",
  "harga_satuan": 360000
}

### 16. Hapus Sparepart
DELETE http://localhost:3000/api/sparepart/4

### ===========================================
### ORDER MANAGEMENT (KASIR)
### ===========================================

### 17. Get All Orders
GET http://localhost:3000/api/orders

### 18. Get All Pelanggan
GET http://localhost:3000/api/orders/pelanggan

### 19. Get All Perangkat
GET http://localhost:3000/api/orders/perangkat

### 20. Buka Order Baru
POST http://localhost:3000/api/orders
Content-Type: application/json

{
  "nama": "Andi Wijaya",
  "no_hp": "081234567890",
  "email": "andi@gmail.com",
  "imei": "IMEI999888777666",
  "merek": "Xiaomi",
  "model": "Redmi Note 12",
  "warna": "Black",
  "staf_pembuat": 2
}

### 21. Buka Order untuk Pelanggan Lama (no_hp sama)
POST http://localhost:3000/api/orders
Content-Type: application/json

{
  "nama": "Andi Wijaya",
  "no_hp": "081234567890",
  "email": "andi@gmail.com",
  "imei": "IMEI111222333444",
  "merek": "Samsung",
  "model": "Galaxy A54",
  "warna": "White",
  "staf_pembuat": 2
}

### 22. Cancel Order
DELETE http://localhost:3000/api/orders/5

### ===========================================
### DIAGNOSA (TEKNISI)
### ===========================================

### 23. Get All Diagnosa
GET http://localhost:3000/api/diagnosa

### 24. Set Diagnosa untuk Order
POST http://localhost:3000/api/diagnosa
Content-Type: application/json

{
  "order_id": 1,
  "teknisi_id": 3,
  "diagnosis": "Baterai rusak, perlu diganti"
}

### 25. Update Diagnosa (order_id sama, diagnosis baru)
POST http://localhost:3000/api/diagnosa
Content-Type: application/json

{
  "order_id": 1,
  "teknisi_id": 3,
  "diagnosis": "Baterai rusak total, LCD juga retak"
}

### ===========================================
### ESTIMASI (TEKNISI & KASIR)
### ===========================================

### 26. Get All Estimasi
GET http://localhost:3000/api/estimasi

### 27. Set Estimasi (Teknisi)
POST http://localhost:3000/api/estimasi
Content-Type: application/json

{
  "order_id": 1,
  "biaya_jasa": 100000,
  "biaya_sparepart": 175000,
  "estimasi_kerja": 5,
  "status": "Pending"
}

### 28. Approve Estimasi (Kasir)
POST http://localhost:3000/api/estimasi/approve
Content-Type: application/json

{
  "order_id": 1,
  "staf_id": 2,
  "keputusan": "approve"
}

### 29. Reject Estimasi (Kasir)
POST http://localhost:3000/api/estimasi/approve
Content-Type: application/json

{
  "order_id": 2,
  "staf_id": 2,
  "keputusan": "reject"
}

### 30. Tambah Sparepart ke Order (Teknisi)
POST http://localhost:3000/api/estimasi/sparepart
Content-Type: application/json

{
  "order_id": 1,
  "sparepart_id": 2,
  "jumlah": 1
}

### 31. Set Repair Completed (Teknisi)
PUT http://localhost:3000/api/estimasi/complete
Content-Type: application/json

{
  "order_id": 1,
  "teknisi_id": 3
}

### ===========================================
### TAGIHAN & PEMBAYARAN (KASIR)
### ===========================================

### 32. Get All Tagihan
GET http://localhost:3000/api/tagihan

### 33. Get Tagihan Detail (Rincian Item)
GET http://localhost:3000/api/tagihan/detail

### 34. Hitung Tagihan Order
POST http://localhost:3000/api/tagihan
Content-Type: application/json

{
  "order_id": 1
}

### 35. Get All Pembayaran
GET http://localhost:3000/api/tagihan/pembayaran

### 36. Input Pembayaran (Cash)
POST http://localhost:3000/api/tagihan/pembayaran
Content-Type: application/json

{
  "order_id": 1,
  "jumlah_bayar": 275000,
  "metode": "Cash"
}

### 37. Input Pembayaran (QRIS)
POST http://localhost:3000/api/tagihan/pembayaran
Content-Type: application/json

{
  "order_id": 2,
  "jumlah_bayar": 150000,
  "metode": "QRIS"
}

### 38. Input Pembayaran Partial (Belum lunas)
POST http://localhost:3000/api/tagihan/pembayaran
Content-Type: application/json

{
  "order_id": 3,
  "jumlah_bayar": 100000,
  "metode": "Cash"
}

### ===========================================
### ALUR LENGKAP PENGERJAAN SERVIS GADGET
### ===========================================

### ========================================
### STEP 0: SETUP AWAL - INPUT DATA MASTER
### ========================================

### 0.1. Tambah Admin
POST http://localhost:3000/api/staf
Content-Type: application/json

{
  "nama": "Mahardika Arka",
  "email": "admin@gadget.com",
  "password": "admin123",
  "role": "admin"
}

### 0.2. Tambah Kasir
POST http://localhost:3000/api/staf
Content-Type: application/json

{
  "nama": "Olivia",
  "email": "kasir@gadget.com",
  "password": "kasir123",
  "role": "kasir"
}

### 0.3. Tambah Teknisi
POST http://localhost:3000/api/staf
Content-Type: application/json

{
  "nama": "Dicha",
  "email": "teknisi@gadget.com",
  "password": "teknisi123",
  "role": "teknisi"
}

### 0.4. Tambah Sparepart - LCD Oppo A57
POST http://localhost:3000/api/sparepart/upsert
Content-Type: application/json

{
  "kode_sku": "SKU001",
  "nama": "LCD Oppo A57",
  "harga_satuan": 350000,
  "tambah_qty": 10
}

### 0.5. Tambah Sparepart - Baterai Samsung A20
POST http://localhost:3000/api/sparepart/upsert
Content-Type: application/json

{
  "kode_sku": "SKU002",
  "nama": "Baterai Samsung A20",
  "harga_satuan": 175000,
  "tambah_qty": 5
}

### 0.6. Tambah Sparepart - Speaker iPhone XR
POST http://localhost:3000/api/sparepart/upsert
Content-Type: application/json

{
  "kode_sku": "SKU003",
  "nama": "Speaker iPhone XR",
  "harga_satuan": 250000,
  "tambah_qty": 4
}

### ========================================
### STEP 1: KASIR - BUKA ORDER SERVIS BARU
### ========================================

### 1.1. Cek Daftar Staf (Ambil ID Kasir)
GET http://localhost:3000/api/staf

### 1.2. Cek Pelanggan yang Sudah Terdaftar
GET http://localhost:3000/api/orders/pelanggan

### 1.3. Cek Perangkat yang Sudah Terdaftar
GET http://localhost:3000/api/orders/perangkat

### 1.4. Cek Semua Order Servis
GET http://localhost:3000/api/orders

### 1.5. Buka Order Baru - Pelanggan Raisa
POST http://localhost:3000/api/orders
Content-Type: application/json

{
  "nama": "Raisa Andini",
  "no_hp": "081233344455",
  "email": "raisa@gmail.com",
  "imei": "IMEI123456789987",
  "merek": "Samsung",
  "model": "A20",
  "warna": "Blue",
  "staf_pembuat": 2
}

### 1.6. Buka Order Baru - Pelanggan Joke
POST http://localhost:3000/api/orders
Content-Type: application/json

{
  "nama": "Joke Owei",
  "no_hp": "08123232325",
  "email": "masdodo@gmail.com",
  "imei": "IMEI12356789323",
  "merek": "POCO",
  "model": "F3 Pro",
  "warna": "Black",
  "staf_pembuat": 2
}

### ========================================
### STEP 2: TEKNISI - DIAGNOSA GADGET
### ========================================

### 2.1. Cek Daftar Staf (Ambil ID Teknisi)
GET http://localhost:3000/api/staf

### 2.2. Cek Order Servis yang Masuk
GET http://localhost:3000/api/orders

### 2.3. Cek Data Perangkat
GET http://localhost:3000/api/orders/perangkat

### 2.4. Set Diagnosa untuk Order #1
POST http://localhost:3000/api/diagnosa
Content-Type: application/json

{
  "order_id": 1,
  "teknisi_id": 3,
  "diagnosis": "Baterai drop cepat dan perangkat mati tiba-tiba"
}

### 2.5. Lihat Semua Diagnosa
GET http://localhost:3000/api/diagnosa

### ========================================
### STEP 3: TEKNISI - BUAT ESTIMASI
### ========================================

### 3.1. Cek Daftar Sparepart & Harga
GET http://localhost:3000/api/sparepart

### 3.2. Cek Sparepart yang Stoknya Menipis (â‰¤3)
GET http://localhost:3000/api/sparepart/stok-menipis

### 3.3. Cek Diagnosa yang Ada
GET http://localhost:3000/api/diagnosa

### 3.4. Cek Estimasi yang Sudah Dibuat
GET http://localhost:3000/api/estimasi

### 3.5. Buat Estimasi untuk Order #1
POST http://localhost:3000/api/estimasi
Content-Type: application/json

{
  "order_id": 1,
  "biaya_jasa": 100000,
  "biaya_sparepart": 175000,
  "estimasi_kerja": 5,
  "status": "Pending"
}

### ========================================
### STEP 4: KASIR - APPROVE ESTIMASI
### ========================================

### 4.1. Cek Order Servis
GET http://localhost:3000/api/orders

### 4.2. Cek Estimasi untuk Dikonfirmasi ke Pelanggan
GET http://localhost:3000/api/estimasi

### 4.3. Approve Estimasi (Pelanggan Setuju)
POST http://localhost:3000/api/estimasi/approve
Content-Type: application/json

{
  "order_id": 1,
  "staf_id": 2,
  "keputusan": "approve"
}

### ========================================
### STEP 5: TEKNISI - KERJAKAN & PASANG SPAREPART
### ========================================

### 5.1. Cek Daftar Sparepart
GET http://localhost:3000/api/sparepart

### 5.2. Cek Sparepart yang Menipis
GET http://localhost:3000/api/sparepart/stok-menipis

### 5.3. Cek Diagnosa
GET http://localhost:3000/api/diagnosa

### 5.4. Cek Estimasi
GET http://localhost:3000/api/estimasi

### 5.5. Tambah Sparepart ke Order (Baterai Samsung)
POST http://localhost:3000/api/estimasi/sparepart
Content-Type: application/json

{
  "order_id": 1,
  "sparepart_id": 2,
  "jumlah": 1
}

### ========================================
### STEP 6: TEKNISI - SELESAIKAN PERBAIKAN
### ========================================

### 6.1. Cek Status Order
GET http://localhost:3000/api/orders

### 6.2. Tandai Perbaikan Selesai (Ready for Pickup)
PUT http://localhost:3000/api/estimasi/complete
Content-Type: application/json

{
  "order_id": 1,
  "teknisi_id": 3
}

### ========================================
### STEP 7: KASIR - BUAT TAGIHAN
### ========================================

### 7.1. Cek Order yang Sudah Selesai
GET http://localhost:3000/api/orders

### 7.2. Cek Detail Tagihan (Rincian Item)
GET http://localhost:3000/api/tagihan/detail

### 7.3. Hitung Tagihan untuk Order #1
POST http://localhost:3000/api/tagihan
Content-Type: application/json

{
  "order_id": 1
}

### 7.4. Lihat Semua Tagihan
GET http://localhost:3000/api/tagihan

### ========================================
### STEP 8: KASIR - PROSES PEMBAYARAN
### ========================================

### 8.1. Cek Tagihan yang Ada
GET http://localhost:3000/api/tagihan

### 8.2. Cek Riwayat Pembayaran
GET http://localhost:3000/api/tagihan/pembayaran

### 8.3. Input Pembayaran (QRIS - Lunas)
POST http://localhost:3000/api/tagihan/pembayaran
Content-Type: application/json

{
  "order_id": 1,
  "jumlah_bayar": 275000,
  "metode": "QRIS"
}

### 8.4. Verifikasi Status Tagihan (Harus jadi "Paid")
GET http://localhost:3000/api/tagihan

### 8.5. Verifikasi Status Order (Harus jadi "Closed")
GET http://localhost:3000/api/orders

### ========================================
### STEP 9 (OPSIONAL): KASIR - BATALKAN ORDER
### ========================================

### 9.1. Cek Order yang Akan Dibatalkan
GET http://localhost:3000/api/orders

### 9.2. Cek Tagihan (Pastikan Belum Lunas)
GET http://localhost:3000/api/tagihan

### 9.3. Cancel Order (Jika Belum Dibayar)
DELETE http://localhost:3000/api/orders/2

### ===========================================
### TESTING SCENARIO - REJECT ESTIMASI
### ===========================================

### Buka Order Baru untuk Testing Reject
POST http://localhost:3000/api/orders
Content-Type: application/json

{
  "nama": "Test Reject",
  "no_hp": "08199999999",
  "email": "reject@test.com",
  "imei": "IMEI999999999",
  "merek": "Test",
  "model": "Reject",
  "warna": "Red",
  "staf_pembuat": 2
}

### Set Diagnosa untuk Order Testing
POST http://localhost:3000/api/diagnosa
Content-Type: application/json

{
  "order_id": 3,
  "teknisi_id": 3,
  "diagnosis": "Testing reject estimasi"
}

### Buat Estimasi untuk Order Testing
POST http://localhost:3000/api/estimasi
Content-Type: application/json

{
  "order_id": 3,
  "biaya_jasa": 50000,
  "biaya_sparepart": 0,
  "estimasi_kerja": 2,
  "status": "Pending"
}

### Reject Estimasi (Pelanggan Tidak Setuju)
POST http://localhost:3000/api/estimasi/approve
Content-Type: application/json

{
  "order_id": 3,
  "staf_id": 2,
  "keputusan": "reject"
}





